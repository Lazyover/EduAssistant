{% extends 'base.html' %}

{% block title %}系统初始化 - 教学分析助手{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow">
            <div class="card-header bg-primary text-white text-center">
                <h4 class="mb-0">系统初始化</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <p><i class="fas fa-info-circle me-2"></i>欢迎使用教学分析助手系统！请先创建管理员账户以完成系统初始化。</p>
                </div>
                
                <form method="post" action="{{ url_for('admin.initialize_system') }}">
                    <h5 class="mb-3">管理员账户设置</h5>
                    
                    <div class="mb-3">
                        <label for="admin_username" class="form-label">管理员用户名</label>
                        <input type="text" class="form-control" id="admin_username" name="admin_username" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="admin_name" class="form-label">管理员姓名</label>
                        <input type="text" class="form-control" id="admin_name" name="admin_name" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="admin_email" class="form-label">管理员邮箱</label>
                        <input type="email" class="form-control" id="admin_email" name="admin_email" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="admin_password" class="form-label">管理员密码</label>
                        <input type="password" class="form-control" id="admin_password" name="admin_password" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="admin_password_confirm" class="form-label">确认密码</label>
                        <input type="password" class="form-control" id="admin_password_confirm" name="admin_password_confirm" required>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">初始化系统</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- 确认密码验证 -->
{% block extra_js %}
<script>
    document.querySelector('form').addEventListener('submit', function(e) {
        const password = document.getElementById('admin_password').value;
        const confirmPassword = document.getElementById('admin_password_confirm').value;
        
        if (password !== confirmPassword) {
            e.preventDefault();
            alert('两次输入的密码不一致，请重新输入');
        }
    });
</script>
{% endblock %}
{% endblock %}
